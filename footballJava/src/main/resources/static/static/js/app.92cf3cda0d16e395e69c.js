webpackJsonp([1],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("7+uW"),s=a("mtWM"),i=a.n(s);var n={name:"HelloWorld",data:()=>({times:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],num:.75,tableData:[],fileList:[],upload1Datapath:"",upload3Datapath:"",loading:"",conflictVal:.6,anaFinished:!1,getFinished:!1}),methods:{initPredictions(){(t=>i.a.get("/forecast/list",{params:t}))({startDate:new Date(new Date(this.times[0]).toLocaleDateString()).getTime(),endDate:new Date(new Date(this.times[1]).toLocaleDateString()).getTime(),startTime:new Date(this.times[0]).getTime(),endTime:new Date(this.times[1]).getTime(),value:this.num}).then(t=>{let e=t.data;t.data&&t.data.success||this.$message.error("查询失败");let a=e.data,l=[],s=localStorage.getItem("signIds")?JSON.parse(localStorage.getItem("signIds")):[];for(let t of a){let e={};e.id=t[0],e.type=t[1],e.changci=t[2],e.docTime=t[3],t[4]?e.matchTime=this.getTimeStr(new Date(t[4])):e.matchTime="",e.zhudui=t[5],e.kedui=t[6],e.pankou=t[7],e.linchangpankou=t[8];let a=t.slice(9,14);e.maxVal=Math.max(...a);let i=a.indexOf(e.maxVal);e.maxIndex=i,e.maxName=this.getMaxName(i),e.isWorth=this.checkWorth(i,e.maxVal,t.slice(16,19)),e.bifen=null!=t[14]?t[14]+":"+t[15]:"",e.zbf=t[14],e.kbf=t[15],e.signStatus=s.indexOf(t[0])>-1?"已标记":"",s.indexOf(t[0])>-1&&null!=t[14]&&null!=t[15]?e.preResult=this.getPreResult(i,t[14],t[15],t[7]):e.preResult="",l.push(e)}this.tableData=l})},getPreResult(t,e,a,l){if(t in[0,1,2])return 0==t&&e>a||1==t&&e==a||2==t&&e<a?"红":"黑";if(e-a-l==0)return"走";if(0==l)return"走";if(3==t){let t=l>0?1:-1;return(e-a-l)*t==.25?"红半":(e-a-l)*t>0?"红":(e-a-l)*t==-.25?"黑半":"黑"}if(4==t){let t=l>0?1:-1;return(e-a-l)*t==-.25?"红半":(e-a-l)*t<0?"红":(e-a-l)*t==.25?"黑半":"黑"}},signMatch(t,e){let a=localStorage.getItem("signIds")?JSON.parse(localStorage.getItem("signIds")):[],l=new Set(a);l.add(e.id),a=Array.from(l),localStorage.setItem("signIds",JSON.stringify(a));let s=e;s.signStatus="已标记",null!=s.zbf&&null!=s.kbf?s.preResult=this.getPreResult(s.maxIndex,s.zbf,s.kbf,s.pankou):s.preResult="",this.tableData[t]=s},cancelSignMatch(t,e){let a=e,l=localStorage.getItem("signIds")?JSON.parse(localStorage.getItem("signIds")):[],s=new Set(l);s.has(a.id)&&(s.delete(a.id),l=Array.from(s),localStorage.setItem("signIds",JSON.stringify(l)),a.signStatus="",a.preResult="",this.tableData[t]=a)},filterHandler:(t,e,a)=>e[a.property]===t,tableRowClassName:({row:t,rowIndex:e})=>"已标记"===t.signStatus?t.preResult.indexOf("红")>-1?"error-row":t.preResult.indexOf("黑")>-1?"success-row":"warning-row":"",getNeednum(){(()=>i.a.get("/forecast/needAnaNum",{}))().then(t=>{let e=t.data;t.data&&t.data.success||this.$message.error("查询失败");let a=e.data;this.anaFinished=!(a>0),this.getFinished=!0})},checkWorth:(t,e,a)=>t>2||!(a[t]*e<1.02),getMaxName(t){switch(t){case 0:return"胜";case 1:return"平";case 2:return"负";case 3:return"上";case 4:return"下";default:return""}},checkIsConflict(t,e,a,l,s,i){let n=this.conflictVal;return t>n&&e>n||(e>n&&a>n||(a>n&&t>n||(l>n&&s>n||(i>0&&t>n&&s>n||(i>0&&(e>n||a>n)&&l>n||(i<0&&a>n&&s>n||i<0&&(t>n||e>n)&&l>n))))))},setCellClass({row:t,column:e,rowIndex:a,columnIndex:l}){return 8==l?this.getClassName(t.smax):10==l?this.getClassName(t.pmax):12==l?this.getClassName(t.fmax):14==l?this.getClassName(t.shmax):16==l?this.getClassName(t.xmax):void 0},getClassName(t){return t>=this.num+.2?"third-level":t>=this.num+.1?"second-level":t>=this.num?"first-level":""},getTimeStr(t){var e=t.getFullYear(),a=t.getMonth()+1,l=t.getDate(),s=t.getHours(),i=t.getMinutes(),n=e+"-";return a<10&&(n+="0"),n+=a+"-",l<10&&(n+="0"),n+=l+" ",s<10&&(n+="0"),n+=s+":",i<10&&(n+="0"),n+=i},uploadSuccess(){this.loading&&this.loading.close(),this.$message.success("上传成功")},startUpload(){return this.loading=this.$loading({lock:!0,text:"正在上传...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),!0}},mounted(){let t=new Date-108e5,e=t+864e5;this.times=[t,e],this.initPredictions(),this.getNeednum(),this.upload1Datapath="/file/upload1Data",this.upload3Datapath="/file/upload3Data"}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-col",{staticStyle:{height:"100%"},attrs:{span:20,offset:2}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"condition-name"},[t._v("比赛时间:")]),t._v(" "),a("el-date-picker",{staticStyle:{float:"left"},attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.times,callback:function(e){t.times=e},expression:"times"}}),t._v(" "),a("span",{staticClass:"condition-name"},[t._v("概率阈值:")]),t._v(" "),a("el-input",{staticStyle:{width:"150px",float:"left"},attrs:{placeholder:"请输入0-1之间的数字"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),t._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.initPredictions}},[t._v("搜索")]),t._v(" "),a("el-alert",{staticStyle:{width:"200px",float:"left","margin-left":"20px"},style:{display:t.getFinished?"":"none"},attrs:{title:t.anaFinished?"分析成功":"正在分析中",type:t.anaFinished?"success":"error",effect:"dark",closable:!1}}),t._v(" "),a("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline-flex"},attrs:{action:t.upload1Datapath,"on-success":t.uploadSuccess,"before-upload":t.startUpload,"show-file-list":!1,"file-list":t.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("1版上传")])],1),t._v(" "),a("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline-flex"},attrs:{action:t.upload3Datapath,"on-success":t.uploadSuccess,"before-upload":t.startUpload,"show-file-list":!1,"file-list":t.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("3版上传")])],1)],1),t._v(" "),a("div",[a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"750","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"type",label:"类型",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"changci",label:"场次",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"docTime",label:"采集时间",sortable:"",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"matchTime",label:"比赛时间",sortable:"",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zhudui",label:"主队",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"kedui",label:"客队",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pankou",label:"盘口",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"linchangpankou",label:"临场",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maxName",label:"推荐",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maxVal",label:"概率",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"isWorth",label:"值得",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:!0===e.row.isWorth?"danger":"","disable-transitions":""}},[t._v(t._s(!0===e.row.isWorth?"是":"否"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"signStatus",label:"标记状态",filters:[{text:"已标记",value:"已标记"},{text:"",value:""}],"filter-method":t.filterHandler,width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"标记操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.signMatch(e.$index,e.row)}}},[t._v("标记")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.cancelSignMatch(e.$index,e.row)}}},[t._v("删除")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"bifen",label:"比分",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"preResult",label:"预测结果",width:"100"}})],1)],1)],1)])],1)},staticRenderFns:[]};var o={name:"App",components:{HelloWorld:a("VU/8")(n,r,!1,function(t){a("zI8W")},"data-v-5c016380",null).exports}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("HelloWorld")],1)},staticRenderFns:[]};var u=a("VU/8")(o,c,!1,function(t){a("nhjR")},null,null).exports,d=a("zL8q"),p=a.n(d);a("tvR6"),a("NYWk");l.default.prototype.$axios=i.a,l.default.config.productionTip=!1,l.default.use(p.a),l.default.use(i.a),new l.default({el:"#app",components:{App:u},template:"<App/>"})},NYWk:function(t,e){},nhjR:function(t,e){},tvR6:function(t,e){},zI8W:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.92cf3cda0d16e395e69c.js.map